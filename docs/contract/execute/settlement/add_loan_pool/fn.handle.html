<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Handles loan pool additions."><title>handle in contract::execute::settlement::add_loan_pool - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-b0742ba02757f159.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="contract" data-themes="" data-resource-suffix="" data-rustdoc-version="1.83.0 (90b35a623 2024-11-26)" data-channel="1.83.0" data-search-js="search-f0d225181b97f9a4.js" data-settings-js="settings-805db61a62df4bd2.js" ><script src="../../../../static.files/storage-1d39b6787ed640ff.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../../static.files/main-f070b9041d14864c.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-0111fcff984fae8f.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../contract/index.html">contract</a><span class="version">1.1.1</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">handle</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#arguments" title="Arguments">Arguments</a></li><li><a href="#returns" title="Returns">Returns</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="index.html">In contract::<wbr>execute::<wbr>settlement::<wbr>add_<wbr>loan_<wbr>pool</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../../../index.html">contract</a>::<wbr><a href="../../index.html">execute</a>::<wbr><a href="../index.html">settlement</a>::<wbr><a href="index.html">add_loan_pool</a></span><h1>Function <span class="fn">handle</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../../src/contract/execute/settlement/add_loan_pool.rs.html#50-96">source</a> </span></div><pre class="rust item-decl"><code>pub fn handle(
    deps: <a class="type" href="../../../core/aliases/type.ProvDepsMut.html" title="type contract::core::aliases::ProvDepsMut">ProvDepsMut</a>&lt;'_&gt;,
    env: Env,
    info: MessageInfo,
    loan_pools: <a class="struct" href="../../../core/security/struct.ContributeLoanPools.html" title="struct contract::core::security::ContributeLoanPools">ContributeLoanPools</a>,
) -&gt; <a class="type" href="../../../core/aliases/type.ProvTxResponse.html" title="type contract::core::aliases::ProvTxResponse">ProvTxResponse</a></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Handles loan pool additions.</p>
<p>This function accepts multiple loan pools and processes each loan pool. It first verifies
whether the sender is authorized i.e. whether the sender is in the <code>whitelist_contributors</code>.
It then creates a collateral for each loan pool, adds the collateral into the storage
(using the <code>set</code> function) and then updates the response with loan pool related messages
and events. If all the loan pools are successfully processed and collaterals are successfully
added to each one of them, the function then updates the <code>response</code> attributes and data
accordingly and returns it.</p>
<p>It is important to note that this function will fail if the sender is not in the whitelist of
contributors i.e. <code>whitelist_contributors</code> does not contain the sender.</p>
<h2 id="arguments"><a class="doc-anchor" href="#arguments">ยง</a>Arguments</h2>
<ul>
<li><code>deps</code> - A mutable reference to the provenance dependencies.</li>
<li><code>env</code> - The environment in which the contract is running.</li>
<li><code>info</code> - The information of the sender.</li>
<li><code>loan_pools</code> - Loan pools to be contributed to.</li>
</ul>
<h2 id="returns"><a class="doc-anchor" href="#returns">ยง</a>Returns</h2>
<ul>
<li>
<p>On Success - A <code>ProvTxResponse</code> containing updated response for each loan pool addition.
The response includes newly computed collaterals, messages and events.</p>
</li>
<li>
<p>On Failure - An Err variant of <code>ProvTxResponse</code> which might contain a <code>ContractError</code> if:</p>
<ul>
<li>The sender is not in the whitelist contributors.</li>
<li>There is any underlying failure with processing any of the loan pools.</li>
</ul>
</li>
</ul>
</div></details></section></div></main></body></html>